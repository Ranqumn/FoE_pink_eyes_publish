%----------------------------------------------------------------------------------------
%	Package Settings
%----------------------------------------------------------------------------------------


% Floats

\usepackage{graphicx} % insert image
\graphicspath{{image/}} % image dir

\usepackage{float} % use [H] to fix immobile floats

% chapter intro image
\newcommand{\chapterintroimage}[1]{
\begin{figure}[H]
	\centering
	\includegraphics[width=0.9\linewidth]{#1}
\end{figure}
}

% --------

% Fudational Typeset

\usepackage{nag} % check outdated commands

% \usepackage[english]{babel}
\usepackage{microtype} % mircotype

\usepackage{calc} % layout calc

% \usepackage{layout} % check out layout

% head style

\usepackage{fancyhdr}


\fancypagestyle{english}{%
\fancyhf{} % cleanup

\fancyhead[LE,RO]{\thepage}

\fancyhead[LO]{\sffamily {\leftmark}} % oddpage  \leftmark = chapter name
\fancyhead[RE]{\sffamily \uppercase{Fallout Equestria: Pink Eyes}} % evenpage
}

\newcommand{\fancyheadmanuallyenglish}[1]{
  \fancyhf{} % cleanup

  \fancyhead[LE,RO]{\thepage}
  
  \fancyhead[LO]{\sffamily \uppercase{#1}} % oddpage  \leftmark = chapter name
  \fancyhead[RE]{\sffamily \uppercase{Fallout Equestria: Pink Eyes}} % evenpage
}



%----------------------------------------------------------------------------------------
%	Input and Fonts
%----------------------------------------------------------------------------------------

\usepackage{ulem} % underline

% use XeLaTeX
\usepackage{xltxtra,xunicode}

\usepackage{textcomp} % extend special characters


\defaultfontfeatures{Ligatures=TeX} % fontspec use TeX's ligature to type



\newfontfamily\raintree{Raintree} % English EPUB carry this font; pay attention to the copyright

\newfontfamily\awesomefont{Font Awesome 5 Free Solid} % Font Awesome



%----------------------------------------------------------------------------------------
% Markup Style
%----------------------------------------------------------------------------------------

\newcommand{\mt}{\raintree} % mt -> mechinetalk
\newcommand{\mten}{\raintree} % define repeatly

\newcommand{\rt}{\sffamily } % rt -> radiotalk
\newcommand{\py}{\sffamily } % py -> 怕音 (pa yin) (Creepy Voice)

\newcommand{\mtpr}[1]{{\mt #1}} % mtpr -> mechinetalk prefix
\newcommand{\mtenpr}[1]{{\mt #1}} % define repeatly

\newcommand{\rtpr}[1]{{\rt #1}} % rtpr -> radiotalk prefix
\newcommand{\pypr}[1]{{\py #1}} % pypr -> py prefix
\newcommand{\rcpr}[1]{\emph{#1}} % mrpr -> recall prefix
\newcommand{\thpr}[1]{\emph{#1}} % thpr -> thought prefix
\newcommand{\stpr}[1]{{\itshape #1}} % st -> stress
\newcommand{\rspr}[1]{\emph{#1}} % rspr -> record sound
\newcommand{\wrpr}[1]{{\itshape #1}} % wr -> write 

%----------------------------------------------------------------------------------------
%	Math Related
%----------------------------------------------------------------------------------------

\usepackage{amsmath,amssymb,amsthm}
% \usepackage{siunitx}

\newfontfamily\engfontapprox{FandolFang-Regular.otf} % \approx use fandolfang

\newcommand{\engapprox}{{\engfontapprox ≈}}

%----------------------------------------------------------------------------------------
%	TOC
%----------------------------------------------------------------------------------------

\setcounter{secnumdepth}{0} % delete section counter

%----------------------------------------------------------------------------------------
%	LINKS
%----------------------------------------------------------------------------------------

\usepackage{url}

% force URL break line via: https://tex.stackexchange.com/questions/3033/forcing-linebreaks-in-url

\expandafter\def\expandafter\UrlBreaks\expandafter{\UrlBreaks%  save the current one
  \do\a\do\b\do\c\do\d\do\e\do\f\do\g\do\h\do\i\do\j%
  \do\k\do\l\do\m\do\n\do\o\do\p\do\q\do\r\do\s\do\t%
  \do\u\do\v\do\w\do\x\do\y\do\z\do\A\do\B\do\C\do\D%
  \do\E\do\F\do\G\do\H\do\I\do\J\do\K\do\L\do\M\do\N%
  \do\O\do\P\do\Q\do\R\do\S\do\T\do\U\do\V\do\W\do\X%
  \do\Y\do\Z}



\usepackage[xetex]{hyperref}

\hypersetup{breaklinks=true,
            pdfauthor={RandomQuantum},
            pdftitle={Fallout Equestria: Pink Eyes},
            pdfcreator={XeLaTeX and hyperref},
            pdfkeywords={FoE}
            }
%----------------------------------------------------------------------------------------
%	Enviroment Markup
%----------------------------------------------------------------------------------------

% intro markup
\newenvironment{intro}{\begin{center}\slshape}
{\end{center}\medskip}

% \newenvironment{song}{\begin{flushright}\itshape \kaishu {\awesomefont  \quad}}{\end{flushright}}

% song
\newenvironment{song}{\begin{flushright}\itshape}{\end{flushright}}

% music
\newenvironment{music}{\begin{flushright}\itshape {\awesomefont  }\hspace{\fill}}{\end{flushright}}

% \newenvironment{song}{\begin{flushright}\itshape \kaishu \marginpar[]{ \awesomefont }}{\end{flushright}}

% \newenvironment{song}{\marginpar[]{ \awesomefont }\begin{flushright}\itshape \kaishu}{\end{flushright}}


\newcommand\englishdaytimeplace[3]{
  \begin{table}[H]
    \centering \ttfamily
    \textsc{Day} #1

    \textsc{Time} approximately #2

    \textsc{Loaction}: #3
  \end{table}
}

\newcommand\englishunknowndaytimeplace{
  \begin{table}[H] % fixed
    \centering
    \begin{tabular}{lr}
      \texttt{\textsc{Day}} & \texttt{N.A.} \\
      \texttt{\textsc{Time}} & \texttt{N.A.} \\
      \texttt{\textsc{Loaction}} & \texttt{N.A.} \\
    \end{tabular}    
  \end{table}
}

\font\eightssi=cmssqi8

\newenvironment{motto}{
~\vfill
\begin{flushright}
  \eightssi
}{\end{flushright}}


\newenvironment{engnote}{
\paragraph{Hoovenote}}{\bigskip}

\newcommand\engprintstatus[7]{
\begin{flushleft}
\textbf{Puppy's S.P.E.C.I.A.L.}
\end{flushleft}

\begin{itemize}
\item{\makebox[2cm][l]{Strength:} #1}
\item{\makebox[2cm][l]{Perception:} #2}
\item{\makebox[2cm][l]{Endurance:} #3}
\item{\makebox[2cm][l]{Charisma:} #4}
\item{\makebox[2cm][l]{Intelligence:} #5}
\item{\makebox[2cm][l]{Agility:} #6}
\item{\makebox[2cm][l]{Luck:} #7}
\end{itemize}
}


%----------------------------------------------------------------------------------------
%	Horizonline
%----------------------------------------------------------------------------------------

% via: fancyhdr manual
\usepackage{fourier-orns}
\newcommand{\horizonline}{%
  \begin{center}
    \rule{0.2\linewidth}{\linethickness}
    \raisebox{-2.1pt}{\hspace{1em}\decofourleft\decotwo\decofourright\hspace{1em}}\,   % however, it is not symmetry; insert \, to fix it
    \rule{0.2\linewidth}{\linethickness}
  \end{center}
}

%----------------------------------------------------------------------------------------
% Fix TOC Bug
%----------------------------------------------------------------------------------------

% Need add after hyperref
% make the part counter as the parrent counter of chapter counter; let chapter could be return to zero
% NOTE: Don't use setcounter{chapter}{0}, this will make hyperref error
\makeatletter
\@addtoreset{chapter}{part}
\makeatother



